function CanvasTokenGenerator(e,b){this.canvas=document.createElement("canvas");this.settings={chars:"",customChars:"",excludedChars:"",lowercase:"abcdefghijklmnopqrstuvwxyz",max:5,maxDots:100,maxLines:20,min:4,number:"0123456789",uppercase:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",userInterferingDots:!0,userInterferingLines:!0};this.token="";this.container=null;var f=function(){return 1===arguments.length?"object"===typeof arguments[0]&&-1<arguments[0].constructor.toString().indexOf("HTML")&&-1<arguments[0].constructor.toString().indexOf("Element"):
	1<arguments.length&&"object"===typeof arguments[0]&&-1<arguments[0].constructor.toString().indexOf("HTML")&&-1<arguments[0].constructor.toString().indexOf("Element")?"string"===typeof arguments[1]?arguments[1].replace(/\s+/g,"").toUpperCase()===arguments[0].tagName.toUpperCase():!0:!1},a=function(c){if("string"!==typeof c)throw Error("Query selector must be a string");if(""===c.replace(/\s+/g,""))throw Error("Query selector cannot be empty");if(!document.querySelector(c))throw Error("Query selector must point to a valid DOM element");
	return document.querySelector(c)};try{if(function(){return 1===arguments.length?"string"===typeof arguments[0]:1<arguments.length?"string"!==typeof arguments[0]?!1:"boolean"===typeof arguments[1]&&!0===arguments[1]?""!==arguments[0].replace(/\s+/g,""):!0:!1}(e))this.container=a(e);else if(f(e))this.container=e;else throw Error("CanvasTokenGenerator constructor requires at least one parameter");this.container.innerHTML="";this.container.appendChild(this.canvas);this.canvas.height=this.container.getBoundingClientRect().height;
	this.canvas.width=this.container.getBoundingClientRect().width;this.constructor(b)}catch(c){throw c;}}
CanvasTokenGenerator.prototype.constructor=function(e){if("object"===typeof e&&Object.keys(e).length)for(var b in e){var f=e[b];switch(b){case "customChars":"string"===typeof f&&(this.settings.chars+=f);break;case "excludedChars":"string"===typeof f&&(this.settings.excludedChars=f);break;case "lowercase":case "number":case "uppercase":"string"===typeof f&&(this.settings[b]=f.replace(/\s+/g,"").toLowerCase().split("").reduce(function(c,k){return-1===c.indexOf(k)?c+k:c}));break;case "max":case "maxDots":case "maxLines":case "min":0<
parseInt(f)&&(this.settings[b]=parseInt(f))}}var a=this.settings.chars+this.settings.lowercase+this.settings.number+this.settings.uppercase;this.settings.excludedChars&&this.settings.excludedChars.split("").forEach(function(c){a=a.replace(new RegExp(c,"gi"),"")});if(!a.length)throw Error("No characters available after adapting the options");this.settings.chars=a;return this};
CanvasTokenGenerator.prototype.draw=function(){function e(){function g(w,C,z){return 192<=.299*w+.587*z+.114*z}function d(){return Math.floor(256*Math.random())}var l=0,n=d(),t=d(),u=d();if(arguments.length&&"string"===typeof arguments[0]){var m=arguments[0];m=m.replace(/[rgba\(\)]/gi,"").split(",").map(function(w){return parseInt(w)});m=g(m[0],m[1],m[2]);if(g(m[0],m[1],m[2]))for(;g(n,t,u)||100<=l;)l++,n=d(),t=d(),u=d();else for(;!g(n,t,u)||100<=l;)l++,n=d(),t=d(),u=d()}return"rgba("+n+","+t+","+
	u+")"}function b(g,d){g>d&&(g=[d,d=g][0]);return Math.floor(Math.random()*(d-g)+g)}var f=e(),a=this.canvas.getContext("2d"),c="Arial Georgia Helvetica SimHei SimSong Verdana".split(" "),k=this.canvas.height,h,q=function(g,d,l){d=b(d,l);l="";for(var n=0;n<d;n++)l+=g[Math.floor(Math.random()*g.length)];return l}(this.settings.chars,this.settings.min,this.settings.max),r=this.canvas.width,p=Math.floor(r/(3*q.length/2+.5)),v=p/2,x=b(v,.5*v);p>.5*k&&(p=.5*k);a.textBaseline="center";a.fillStyle=e();a.fillRect(0,
	0,this.canvas.width,this.canvas.height);for(h=0;h<q.length;h++){a.fillStyle=e(f);a.font=b(.9*p,1.1*p)+"px "+c[b(0,c.length)];var y=b(x+v/2,x+v),A=b(p,k-v),B=b(-20,20);x=y+p;a.translate(y,A);a.rotate(B*Math.PI/180);a.fillText(q[h],0,0);a.rotate(-B*Math.PI/180);a.translate(-y,-A)}if(this.settings.userInterferingLines)for(h=0;h<b(.5*this.settings.maxLines,this.settings.maxLines);h++)f=b(.5*r,r),c=b(-.5*r,1.5*r),q=b(-.5*k,1.5*k),a.strokeStyle=e(),a.beginPath(),a.moveTo(c,q),a.lineTo(b(c,f),b(q,f)),a.stroke();
	if(this.settings.userInterferingDots)for(h=0;h<b(.5*this.settings.maxDots,this.settings.maxDots);h++)a.fillStyle=e(),a.beginPath(),a.arc(b(0,r),b(0,k),1,0,2*Math.PI),a.fill()};